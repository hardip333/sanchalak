jQuery.easing._dd_easing = function (d, a, i, s, t) { return -s * ((a = a / t - 1) * a * a * a - 1) + i }, function (d) { d.fn.dateDropper = function (a) { return d(this).each(function () { if (d(this).is("input") && "text" == d(this).attr("type")) { var i, s, t, n, r = (new Date).getFullYear(), l = (new Date).getDate(), e = (new Date).getMonth(), o = d(".dd-w").length, f = '<div class="dd-w dd-init" id="dd-w-' + o + '"><div class="dd-o"></div><div class="dd-c" ><div class="dd-w-c"><div class="dd-b dd-y"><div class="dd-ul"><a class="dd-n dd-n-left"><i class="dd-icon-left"></i></a><a class="dd-n dd-n-right"><i class="dd-icon-right"></i></a><ul></ul></div></div><div class="dd-s-b dd-s-b-y dd-trans" ><div class="dd-s-b-ul"><ul></ul></div></div><div class="dd-s-b dd-s-b-s-y dd-trans"><div class="dd-s-b-ul"><ul></ul></div></div><div class="dd-s-b-s"><i class="dd-icon-close"></i></div><div class="dd-b dd-sub-y"><div class="dd-ul"><a class="dd-n dd-n-left"><i class="dd-icon-left"></i></a><a class="dd-n dd-n-right"><i class="dd-icon-right"></i></a><ul></ul></div></div><div class="dd-s"><a><i class="dd-icon-check"></i></a></div></div></div></div>'; d("body").append(f); var c = d(this), u = d("#dd-w-" + o), h = function (d) { return !(d % 4 || !(d % 100) && d % 400) }, p = function (d) { return d < 10 ? "0" + d : d }, b = d.extend({ animate: !0, init_animation: "fadein", format: "m/Y", lang: "en", lock: !1, maxYear: r, minYear: 1970, yearsRange: 10, dropPrimaryColor: "#2c3e50", dropTextColor: "#333333", dropBackgroundColor: "#FFFFFF", dropBorder: "1px solid #08C", dropBorderRadius: 8, dropShadow: "0 0 10px 0 rgba(0, 136, 204, 0.45)", dropWidth: 124, dropTextWeight: "bold" }, a), m = null, v = !1; d("<style>#dd-w-" + o + " { font-weight: " + b.dropTextWeight + "; } #dd-w-" + o + " .dd-w-c,#dd-w-" + o + " .dd-ul li,#dd-w-" + o + " .dd-s-b-ul ul { width:" + b.dropWidth + "px; } #dd-w-" + o + " .dd-w-c{color:" + b.dropTextColor + ";background:" + b.dropBackgroundColor + ";border:" + b.dropBorder + ";box-shadow:" + b.dropShadow + ";border-radius:" + b.dropBorderRadius + "px}#dd-w-" + o + " .dd-w-c,#dd-w-" + o + " .dd-s-b{background:" + b.dropBackgroundColor + "}#dd-w-" + o + " .dd-sun,#dd-w-" + o + " .dd-s-b-ul li.dd-on{color:" + b.dropPrimaryColor + "}#dd-w-" + o + " .dd-c .dd-s,#dd-w-" + o + " .dd-s-b-s,#dd-w-" + o + " .dd-s-b-sub-y,#dd-w-" + o + " .dd-sub-y{background:" + b.dropPrimaryColor + ";color:" + b.dropBackgroundColor + "}#dd-w-" + o + " .dd-c .dd-s a,#dd-w-" + o + " .dd-c .dd-s a:hover{color:" + b.dropBackgroundColor + "}#dd-w-" + o + " .dd-c:after{border-left:" + b.dropBorder + ";border-top:" + b.dropBorder + "}#dd-w-" + o + ".dd-bottom .dd-c:after{background:" + b.dropBackgroundColor + "}#dd-w-" + o + ".dd-top .dd-c:after{background:" + b.dropPrimaryColor + "}#dd-w-" + o + " .dd-n,#dd-w-" + o + " .dd-sun{color:" + b.dropPrimaryColor + "}#dd-w-" + o + " .dd-sub-y .dd-n{color:" + b.dropBackgroundColor + "} #dd-w-" + o + " .dd-c .dd-s:hover,#dd-w-" + o + " .dd-s-b-s:hover { background:" + function (d, a) { var i = !1; "#" == d[0] && (d = d.slice(1), i = !0); var s = parseInt(d, 16), t = (s >> 16) + a; t > 255 ? t = 255 : t < 0 && (t = 0); var n = (s >> 8 & 255) + a; n > 255 ? n = 255 : n < 0 && (n = 0); var r = (255 & s) + a; return r > 255 ? r = 255 : r < 0 && (r = 0), (i ? "#" : "") + (r | n << 8 | t << 16).toString(16) }(b.dropPrimaryColor, -20) + "; }</style>").appendTo("head"), b.lang; var y = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], C = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], w = function () { u.find(".dd-d li,.dd-s-b li").show(), h(t) && 2 == i ? (u.find(".dd-d ul").width(29 * b.dropWidth), 30 != s && 31 != s || (s = 29), u.find("li[data-id=30],li[data-id=31]").hide()) : h(t) || 2 != i ? 4 == i || 6 == i || 9 == i || 11 == i ? (u.find(".dd-d ul").width(30 * b.dropWidth), 31 == s && (s = 30), u.find("li[data-id=31]").hide()) : u.find(".dd-d ul").width(31 * b.dropWidth) : (u.find(".dd-d ul").width(28 * b.dropWidth), 29 != s && 30 != s && 31 != s || (s = 28), u.find("li[data-id=29],li[data-id=30],li[data-id=31]").hide()), u.find(".dd-d li").each(function (a, s) { var n = d(this).attr("data-id"); 0 == (n = (n = new Date(i + "/" + n + "/" + t)).getDay()) || 6 == n ? d(this).addClass("dd-sun") : d(this).removeClass("dd-sun"), d(this).find("span").html(C[n]) }), u.find(".dd-s-b-d li").each(function (a, s) { var n = d(this).attr("data-id"); 0 == (n = (n = new Date(i + "/" + n + "/" + t)).getDay()) || 6 == n ? d(this).addClass("dd-sun") : d(this).removeClass("dd-sun"), d(this).find("span").html(C[n].substr(0, 3)) }), u.find(".dd-s-b li").removeClass("dd-on"), u.find('.dd-s-b-d li[data-id="' + s + '"],.dd-s-b-m li[data-id="' + i + '"],.dd-s-b-s-y li[data-id="' + t + '"],.dd-s-b-y li[data-id="' + n + '"]').addClass("dd-on"), b.animate ? u.hasClass("dd-init") ? (u.find(".dd-m .dd-ul").animate({ scrollLeft: u.find('.dd-m li[data-id="' + i + '"]').index() * b.dropWidth }, 1200, "swing"), setTimeout(function () { u.find(".dd-d .dd-ul").animate({ scrollLeft: u.find('.dd-d li[data-id="' + s + '"]').index() * b.dropWidth }, 1200, "swing"), setTimeout(function () { u.find(".dd-y .dd-ul").animate({ scrollLeft: u.find('.dd-y li[data-id="' + t + '"]').index() * b.dropWidth }, 1200, "swing", function () { v = !0, u.removeClass("dd-init") }) }, 200) }, 400)) : (u.find(".dd-d .dd-ul").stop().animate({ scrollLeft: u.find('.dd-d li[data-id="' + s + '"]').index() * b.dropWidth }, 260), u.find(".dd-m .dd-ul").stop().animate({ scrollLeft: u.find('.dd-m li[data-id="' + i + '"]').index() * b.dropWidth }, 260), u.find(".dd-y .dd-ul").stop().animate({ scrollLeft: u.find('.dd-y li[data-id="' + t + '"]').index() * b.dropWidth }, 260), u.find(".dd-sub-y .dd-ul").stop().animate({ scrollLeft: u.find('.dd-sub-y li[data-id="' + n + '"]').index() * b.dropWidth }, 260)) : (setTimeout(function () { u.find(".dd-d .dd-ul").scrollLeft(u.find('.dd-d li[data-id="' + s + '"]').index() * b.dropWidth), u.find(".dd-m .dd-ul").scrollLeft(u.find('.dd-m li[data-id="' + i + '"]').index() * b.dropWidth), u.find(".dd-y .dd-ul").scrollLeft(u.find('.dd-y li[data-id="' + t + '"]').index() * b.dropWidth), u.find(".dd-sub-y .dd-ul").scrollLeft(u.find('.dd-sub-y li[data-id="' + n + '"]').index() * b.dropWidth) }, 1), u.hasClass("dd-init") && (u.removeClass("dd-init"), v = !0)), k(n) }, g = function () { u.addClass("dd-bottom"), u.find(".dd-c").css({ top: c.offset().top + c.innerHeight(), left: c.offset().left + (c.innerWidth() / 2 - b.dropWidth / 2) }).addClass("dd-" + b.init_animation) }, x = function () { u.find(".dd-c").addClass("dd-alert").removeClass("dd-" + b.init_animation), setTimeout(function () { u.find(".dd-c").removeClass("dd-alert") }, 500) }, k = function (a) { u.find(".dd-s-b-s-y ul").empty(); var i = parseInt(a), s = i + (b.yearsRange - 1); s > b.maxYear && (s = b.maxYear); for (var r = i; r <= s; r++) { if (r % b.yearsRange == 0) var l = r; u.find(".dd-s-b-s-y ul").append('<li data-id="' + r + '" data-filter="' + l + '">' + r + "</li>") } u.find(".dd-s-b-s-y ul").append('<div class="dd-clear"></div>'), n = parseInt(a), u.find(".dd-sub-y .dd-ul").scrollLeft(u.find('.dd-sub-y li[data-id="' + n + '"]').index() * b.dropWidth), u.find(".dd-s-b-s-y li").each(function (a, i) { d(this).click(function () { u.find(".dd-s-b-s-y li").removeClass("dd-on"), d(this).addClass("dd-on"), t = parseInt(d(this).attr("data-id")), u.find(".dd-s-b-y,.dd-s-b-s-y").removeClass("dd-show"), u.find(".dd-s-b-s,.dd-sub-y").hide(), w() }) }) }, W = function () { u.find(".dd-s-b").each(function (a, t) { var n = d(this); if (n.hasClass("dd-s-b-m") || n.hasClass("dd-s-b-d")) { if (n.hasClass("dd-s-b-m")) for (var r = 12, l = 0; l < r; l++)n.find("ul").append('<li data-id="' + (l + 1) + '">' + y[l].substr(0, 3) + "<span>" + p(l + 1) + "</span></li>"); if (n.hasClass("dd-s-b-d")) for (r = 31, l = 0; l < r; l++)n.find("ul").append('<li data-id="' + (l + 1) + '">' + p(l + 1) + "<span></span></li>") } if (n.hasClass("dd-s-b-y")) for (l = b.minYear; l <= b.maxYear; l++)l % b.yearsRange == 0 && n.find("ul").append('<li data-id="' + l + '">' + l + "</li>"); n.find("ul").append('<div class="dd-clear"></div>'), n.find("ul li").click(function () { (n.hasClass("dd-s-b-m") || n.hasClass("dd-s-b-d")) && (n.hasClass("dd-s-b-m") && (i = parseInt(d(this).attr("data-id"))), n.hasClass("dd-s-b-d") && (s = parseInt(d(this).attr("data-id"))), w(), n.removeClass("dd-show"), u.find(".dd-s-b-s").hide()), n.hasClass("dd-s-b-y") && (u.find(".dd-sub-y").show(), k(d(this).attr("data-id")), u.find(".dd-s-b-s-y").addClass("dd-show")) }); var e = 0, o = !1; n.on("mousewheel DOMMouseScroll", function (d) { o = !0, (d.originalEvent.wheelDeltaY < 0 || d.originalEvent.detail > 0) && (e = n.scrollTop() + 100), (d.originalEvent.wheelDeltaY > 0 || d.originalEvent.detail < 0) && (e = n.scrollTop() - 100), n.stop().animate({ scrollTop: e }, 600, "_dd_easing", function () { o = !1 }) }).on("scroll", function () { o || (e = n.scrollTop()) }) }), u.find(".dd-b").each(function (a, r) { var l, e = d(this), o = 0; if (e.hasClass("dd-m")) { for (var f = 0; f < 12; f++)e.find("ul").append('<li data-id="' + (f + 1) + '">' + y[f].substr(0, 3) + "</li>"); e.find("li").click(function () { if ("m" == b.format || "n" == b.format || "F" == b.format || "M" == b.format) return !1; u.find(".dd-s-b-m").addClass("dd-show") }) } if (e.hasClass("dd-d")) { for (f = 1; f <= 31; f++)e.find("ul").append('<li data-id="' + f + '"><strong>' + p(f) + "</strong><br><span></span></li>"); e.find("li").click(function () { u.find(".dd-s-b-d").addClass("dd-show") }) } if (e.hasClass("dd-y")) { for (f = b.minYear; f <= b.maxYear; f++) { var c; f % b.yearsRange == 0 && (c = 'data-filter="' + f + '"'), e.find("ul").append('<li data-id="' + f + '" ' + c + ">" + f + "</li>") } e.find("li").click(function () { if ("Y" == b.format) return !1; u.find(".dd-s-b-y").addClass("dd-show") }) } if (e.hasClass("dd-sub-y")) for (f = b.minYear; f <= b.maxYear; f++)f % b.yearsRange == 0 && e.find("ul").append('<li data-id="' + f + '">' + f + "</li>"); e.find("ul").width(e.find("li").length * b.dropWidth), e.find(".dd-n").click(function () { var a, r, o; clearInterval(l), e.hasClass("dd-y") && (r = t), e.hasClass("dd-m") && (r = i), e.hasClass("dd-d") && (r = s), e.hasClass("dd-sub-y") && (r = n), o = d(this).hasClass("dd-n-left") ? (a = e.find('li[data-id="' + r + '"]').prev("li")).length && a.is(":visible") ? parseInt(a.attr("data-id")) : parseInt(e.find("li:visible:last").attr("data-id")) : (a = e.find('li[data-id="' + r + '"]').next("li")).length && a.is(":visible") ? parseInt(a.attr("data-id")) : parseInt(e.find("li:first").attr("data-id")), e.hasClass("dd-y") && (t = o), e.hasClass("dd-m") && (i = o), e.hasClass("dd-d") && (s = o), e.hasClass("dd-sub-y") && (n = o), w() }); e.find(".dd-ul").on("scroll", function () { !function () { if (v) { o = Math.round(e.find(".dd-ul").scrollLeft() / b.dropWidth); var d = parseInt(e.find("li").eq(o).attr("data-id")); e.hasClass("dd-y") && (t = d), e.hasClass("dd-m") && (i = d), e.hasClass("dd-d") && (s = d), e.hasClass("dd-sub-y") && (n = d) } }() }); var h = !1; e.find(".dd-ul").on("mousedown touchstart", function () { h || (h = !0), clearInterval(l), d(window).on("mouseup touchend touchmove", function () { h && (clearInterval(l), l = setTimeout(function () { w(), h = !1 }, 780)) }) }), "Y" == b.format && u.find(".dd-m,.dd-d").hide(), "m" != b.format && "n" != b.format && "F" != b.format && "M" != b.format || u.find(".dd-y,.dd-d").hide() }), u.find(".dd-b li").click(function () { if ("m" == b.format || "n" == b.format || "F" == b.format || "M" == b.format || "Y" == b.format) return !1; u.find(".dd-s-b-s").show() }), u.find(".dd-s-b-s").click(function () { u.find(".dd-s-b").removeClass("dd-show"), u.find(".dd-s-b-s").hide() }), u.find(".dd-s").click(function () { !function () { if (b.lock) { var d = Date.parse(r + "-" + (e + 1) + "-" + l) / 1e3, a = Date.parse(t + "-" + i + "-" + s) / 1e3; if ("from" == b.lock) { if (a < d) return x(), !1 } else if (a > d) return x(), !1 } var n = new Date(i + "/" + s + "/" + t); c.val(`${n.getFullYear()}-${n.getFullYear() + 1}`).focus().blur(), n = n.getDay(); b.format.replace(/\b(Y)\b/g, t).replace(/\b(D)\b/g, C[n].substr(0, 3)).replace(/\b(l)\b/g, C[n]).replace(/\b(F)\b/g, y[i - 1]).replace(/\b(M)\b/g, y[i - 1].substr(0, 3)).replace(/\b(n)\b/g, i).replace(/\b(j)\b/g, s); u.find(".dd-c").addClass("dd-fadeout").removeClass("dd-" + b.init_animation), m = setTimeout(function () { u.hide(), u.find(".dd-c").removeClass("dd-fadeout") }, 400), c.change() }() }), u.find(".dd-o").click(function () { u.find(".dd-c").addClass("dd-fadeout").removeClass("dd-" + b.init_animation), m = setTimeout(function () { u.hide(), u.find(".dd-c").removeClass("dd-fadeout") }, 400) }), w() }; c.click(function () { clearInterval(m), u.hasClass("dd-init") && (c.attr({ readonly: "readonly" }).blur(), i = e + 1, s = l, t = r, parseInt(c.attr("data-d")) && parseInt(c.attr("data-d")) <= 31 && (s = parseInt(c.attr("data-d"))), parseInt(c.attr("data-m")) && parseInt(c.attr("data-m")) <= 11 && (i = parseInt(c.attr("data-m")) + 1), parseInt(c.attr("data-y")) && 4 == c.attr("data-y").length && (t = parseInt(c.attr("data-y"))), t > b.maxYear && (b.maxYear = t), t < b.minYear && (b.minYear = t), W()), u.show(), g() }), c.bind("focusin focus", function (d) { d.preventDefault() }), d(window).resize(function () { g() }) } }) } }(jQuery);